<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{pages/search/search}">

<head>
  <meta charset="UTF-8">
  <title>Search-Tracks</title>
  <link rel="stylesheet" th:href="@{/css/style.css}">
  <link rel="stylesheet" th:href="@{/css/tracks-search.css}">
  <link rel="stylesheet" th:href="@{/css/search.css}">
  <!--  <link rel="stylesheet" href="../../../../../../../content_i_like/src/main/resources/static/css/style.css">-->
  <!--  <link rel="stylesheet" href="../../../../../../../content_i_like/src/main/resources/static/css/tracks-search.css">-->
  <!--  <link rel="stylesheet" href="../../../../../../../content_i_like/src/main/resources/static/css/search.css">-->
</head>
<body>

<div layout:fragment="search-fragment">
  <div th:replace="~{pages/search/search::search}"></div>

  <div class="container">

    <form class="block-middle" id="paging" th:method="get"
          th:action="@{/search/test/tracks}">
      <input type="hidden" th:name="keyword" th:value="${keyword}">
    <span class="count-results"
          th:text="${searchResult} ? ${searchResult.message} : '검색해주세요'"></span>
      <hr>
      <br>
      <div class="search-results" th:block th:if="${searchResult != null and searchResultAsList != null}">
        <ul class="tracks-list"
            th:each="counter: ${#numbers.sequence(0, searchResult.pages.getNumberOfElements()-1, 2)}"
            th:unless="${counter >= searchResult.pages.getNumberOfElements()}">
          <li class="tracks-list-elements-left"
              th:unless="${counter >= searchResult.pages.getNumberOfElements()}">

            <img class="tracks-list-image"
                 th:src="${searchResultAsList.get(counter).thumbnailUrl}"/>
            <span class="tracks-list-contents">
              <a href="" class="track-title"
                 th:utext=
                     "${#strings.length(searchResultAsList.get(counter).trackTitle) >= 25} ?
                     ${#strings.substring(searchResultAsList.get(counter).trackTitle, 0, 25)} + '<br>'
                      + ${#strings.substring(searchResultAsList.get(counter).trackTitle, 25, searchResultAsList.get(counter).trackTitle.length())}:
                     ${searchResultAsList.get(counter).trackTitle}"></a>
              <span class="track-album"
                    th:utext=
                        "${#strings.length(searchResultAsList.get(counter).trackAlbum) >= 26} ?
                     ${#strings.substring(searchResultAsList.get(counter).trackAlbum, 0, 26)} + '<br>'
                      + ${#strings.substring(searchResultAsList.get(counter).trackAlbum, 26, searchResultAsList.get(counter).trackAlbum.length())}:
                     ${searchResultAsList.get(counter).trackAlbum}"></span>
              <span class="track-info"
                    th:utext="${searchResultAsList.get(counter).trackArtist}"></span>
          </span>
          </li>
          <li class="tracks-list-elements-right"
              th:unless="${counter+1 >= searchResult.pages.getNumberOfElements()}">

            <img class="tracks-list-image"
                 th:src="${searchResultAsList.get(counter+1).thumbnailUrl}"/>
            <span class="tracks-list-contents">
              <a href="" class="track-title"
                 th:utext=
                     "${#strings.length(searchResultAsList.get(counter+1).trackTitle) >= 25} ?
                     ${#strings.substring(searchResultAsList.get(counter+1).trackTitle, 0, 25)} + '<br>'
                      + ${#strings.substring(searchResultAsList.get(counter+1).trackTitle, 25, searchResultAsList.get(counter+1).trackTitle.length())}:
                     ${searchResultAsList.get(counter+1).trackTitle}"></a>
              <span class="track-album"
                    th:utext=
                        "${#strings.length(searchResultAsList.get(counter+1).trackAlbum) >= 26} ?
                     ${#strings.substring(searchResultAsList.get(counter+1).trackAlbum, 0, 26)} + '<br>'
                      + ${#strings.substring(searchResultAsList.get(counter+1).trackAlbum, 26, searchResultAsList.get(counter+1).trackAlbum.length())}:
                     ${searchResultAsList.get(counter+1).trackAlbum}"></span>
              <span class="track-info"
                    th:utext="${searchResultAsList.get(counter+1).trackArtist}"></span>
          </span>
          </li>
        </ul>
      </div>
      <button th:unless="${searchResult.pages.isLast()}" th:name="page" th:value="${pageable.previousOrFirst().pageNumber}">이전</button>
      <button th:unless="${searchResult.pages.isLast()}" th:name="page" th:value="${pageable.next().pageNumber}">다음</button>
    </form>
  </div>
</div>

</body>
</html>